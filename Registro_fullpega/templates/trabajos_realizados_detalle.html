{% extends 'Partials/_Base.html' %}
{% load bootstrap4 %}
{% load static %}


<link rel="stylesheet" type="text/css" href="{% static 'assets/' %}">

{% block section_contenido %}
    <div class="row text-center">

  <h4>Visualiza los postulantes a las pegas que publicaste!</h4>

  Estas son las postulaciones a las pegas! <hr>
    </div>



    <div class="container">

        <div class="admin-form theme-primary">

              <div class="panel heading-border panel-primary">
                <div class="panel-body bg-light">
                    <div class="section-divider mb40 " id="spy1">
                      <span>¡Detalle pega realizada!</span>

                    </div>

                        <div class="row">
    <div class="col-md-12">
              <div class="" id="spy2">

                <div class="panel-body pn bg-light">
                  <div id="datatable2_wrapper" class=" dataTables_wrapper form-inline dt-bootstrap no-footer">

                      <table id="example" class="table table-striped table-hover dataTable no-footer" id="datatable2" cellspacing="0" width="100%" role="grid" aria-describedby="datatable2_info" style="width: 100%;">
                    <thead >
                      <tr role="row"><th class="sorting_asc text-center" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 157px;">Imagen</th><th class="sorting text-center" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 236px;">Nombre</th><th class="sorting text-center" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 83px;">Calificaciones</th><th class="sorting text-center" tabindex="0" aria-controls="datatable2" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 51px;">Redes</th></tr>
                    </thead>
{#                          <div class="row text-center">#}
{#                              <div class="col-md-2 text-center">#}
{#                                 <h5>Comuna</h5>#}
{#                              </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                 <h5>Area</h5>#}
{#                              </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                 <h5>Minima paga</h5>#}
{#                              </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                 <h5>Maxima paga</h5>#}
{#                              </div>#}
{#                          </div>#}
{#                          <div class="row text-center">#}
{#                                <div class="col-md-2 text-center">#}
{#                                    <select class ="form-control mySelect"  style="" id="mySelect">#}
{#                                        <option value="" disabled selected>Selecciona Comuna</option>#}
{#                                        <option value="Macul">Macul</option>#}
{#                                        <option value="Peñalolen">Peñalolen</option>#}
{#                                    </select>#}
{#                                  </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                  adding-bottom: 1em; margin-bottom: 1em;#}
{#                                    <select class ="form-control mySelect" style="" id="mySelect2">#}
{#                                        <option value="" disabled selected>Selecciona Area</option>#}
{#                                        <option value="Hogar">Hogar</option>#}
{#                                        <option value="Informatica">Informatica</option>#}
{#                                    </select>#}
{#                              </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                    <input class="form-control" id="counter-low" type="text" style="width: 95%" placeholder="Minima paga" />#}
{##}
{#                                  </div>#}
{#                              <div class="col-md-2 text-center">#}
{#                                    <input class="form-control" id="counter-high" type="text" style="width: 95%" placeholder="Maxima paga" />#}
{#                              </div>#}
{##}
{#                          </div>#}

<div class="row">
    <div class="col-md-6">
        <h5 class="text-center">Empleador</h5>
        <hr style="padding: 0%;margin: 0.5em;">

    </div>
    <div class="col-md-6">
        <h5 class="text-center">Pega</h5>
        <hr style="padding: 0%;margin: 0.5em;">

    </div>
</div>
                    <div class="row">
                        <div class="col-md-2">
                            <img class='img-responsive' style="float:right; width: 8em;height: 8em; border-radius: 10em;"src="/media/{{ historico.Trabajo.Usuario.Imagen }}"/>
                        </div>
                        <div class="col-md-4">
                            <h4 class="">{{ historico.Trabajo.Usuario.Nombre }}</h4>
                            <h5 class="">Correo: {{ historico.Trabajo.Usuario.Correo }}</h5>
                            <h5 class="">Telefono: ${{ historico.Trabajo.Usuario.Telefono_C }}</h5>
{#                            <a href="" class="btn btn-rounded btn-success">Ordenar postulantes con Watson</a>#}
                        </div>
{#                        #}
                        <div class="col-md-2">
                            <img class='img-responsive' style="float:right; width: 8em;height: 8em; border-radius: 10em;"src="/media/{{ historico.Trabajo.Imagen }}"/>
                        </div>
                        <div class="col-md-4">
                            <h4 class="">{{ historico.Trabajo.Nombre }}</h4>
                            <h5 class="">Paga acordada: ${{ historico.Trabajo.Monto_pago }}</h5>
                          <h5 class="">Fecha: {{ historico.Trabajo.Fecha }}, {{ historico.Trabajo.Hora }}</h5>
{#                            <a href="" class="btn btn-rounded btn-success">Ordenar postulantes con Watson</a>#}
                        </div>
                    </div>
                                          <hr style="padding: 0%;margin: 0.5em;">

                          <h4 class="text-center">Estos fueron los participantes de la pega!</h4>
                    <hr style="padding: 0%;margin: 0.5em;">
                    <tbody>

                    {% for i in postulantes %}
{#            #                          0    1       2               3      4       5               6             7      8        9#}
{#           padding: 0.5em trabajos_listos.append((i.pk,i.Nombre,i.Area.Nombre,i.Detalle,i.Fecha,i.Hora,i.Direccion.Comuna,i.Monto_pago,i.Imagen,1))#}
                  <tr role="row" class="odd ">
                        <td style="height: 10%;height: 10;padding: 0;"><img class='img-responsive' style="width: 8em;height: 8em; border-radius: 10em;"src="/media/{{ i.Postulante.Imagen }}"/></td>

                        <td style="font-weight: bold;"class="sorting_1 text-center"><span class="text-center">  {{ i.Postulante.Nombre }}</span></br>{{ i.1 }} </td>
                        <td class="text-center">Correo: {{ i.Postulante.Correo  }}<br>Telefono:{{ i.Postulante.Telefono_C  }}</td>

                        <td class="text-center">
                        {% if i.Postulante.Facebook or i.Postulante.Twitter or i.Postulante.Twitter or i.Postulante.Linkedin %}
                            {% if i.Postulante.Twitter %}
                                <div class="card col-md-4" style="padding:1%;width: 25%;height: 100%;"  >
                                <div class="text-center">
                                    <a href="{{ usuario.Twitter }}" class="href" target="_blank">
                                     <img class="class='img-responsive" src="/media/twitter.png" alt="Card image" style="margin:2px;width:80%; height: 80%;">
                                    </a>
                                </div>
                                </div>
                            {% endif %}

                            {% if i.Postulante.Facebook %}
                                <div class="card col-md-4" style="padding:1%;width: 25%;height: 100%;"  >
                                <div class="text-center">
                                    <a href="{{ usuario.Facebook }}" class="href" target="_blank">
                                     <img class="class='img-responsive" src="/media/facebook.png" alt="Card image" style="margin:2px;width:80%; height: 80%;">
                                    </a>
                                </div></div>
                            {% endif %}

                            {% if i.Postulante.Linkedin %}
                                <div class="card col-md-4" style="padding:1%;width: 25%;height: 100%;"  >
                                <div class="text-center">
                                    <a href="{{ usuario.Linkedin }}" class="href" target="_blank">
                                     <img class="class='img-responsive" src="/media/linkedin.png" alt="Card image" style="margin:2px;width:80%; height: 80%;">
                                    </a>
                                </div></div>
                            {% endif %}


                            {% if i.Postulante.Instagram %}
                                <div class="card col-md-4" style="padding:1%;width: 25%;height: 100%;"  >
                                <div class="text-center">
                                    <a href="{{ usuario.Instagram }}" class="href" target="_blank">
                                     <img class="class='img-responsive" src="/media/instagram.png" alt="Card image" style="margin:2px;width:80%; height: 80%;">
                                    </a>
                                </div></div>
                            {% endif %}
                        {% else %}
                        Este usuario no ha vinculado redes sociales aún
                        {% endif %}

                        </td>



                    </tr>
                    {% endfor %}

                    </tbody>
                  </table>
                  </div>
                </div>
              </div>
            </div>
        </div>

                </div>
              </div>
{#    FIN#}
    </div>
{#CON PANEL... FORMATO, BORRAR CUANDO LA TABLA ESTE SEGURA#}
{#    <div class="row">#}
{#        <div class="col-md-12 col-lg-12 admin-grid text-center" >#}
{##}
{#              <div class="panel" id="p5">#}
{#                  <div class="panel-heading" id="TrabajoAcordado{{ i}}"> Vacantes disponibles: {{ trabajo.Vacantes }} / {{ trabajo.Personas_requeridas }}#}
{#                      <script>#}
{#                         document.getElementById('TrabajoAcordado{{ i}}').innerHTML += '<br>Some new content!';#}
{##}
{#                      </script>#}
{#                                         0                    1                                       2                                       #}
{#                      (i.postulante_acordado.Trabajo.pk, i.postulante_acordado.Trabajo.Nombre,i.postulante_acordado.Trabajo.Imagen)#}
{#                    <span class="panel-title" id="NombreTrabajo{{ i}}"> </span>#}
{#                  <span class="panel-controls"><a href="#" class="panel-control-loader"></a><a href="#" class="panel-control-remove"></a><a href="#" class="panel-control-title"></a><a href="#" class="panel-control-color"></a><a href="#" class="panel-control-collapse"></a><a href="#" class="panel-control-fullscreen"></a></span></div>#}
{#                  <div class="panel-editbox" style="display: none;"><input type="text" class="form-control" value="Column Graph"></div><div class="panel-colorbox" style="display: none;"> <span class="bg-white" data-panel-color="panel-default"></span> <span class="bg-primary" data-panel-color="panel-primary"></span> <span class="bg-info" data-panel-color="panel-info"></span> <span class="bg-success" data-panel-color="panel-success"></span> <span class="bg-warning" data-panel-color="panel-warning"></span> <span class="bg-danger" data-panel-color="panel-danger"></span> <span class="bg-alert" data-panel-color="panel-alert"></span> <span class="bg-system" data-panel-color="panel-system"></span> <span class="bg-dark" data-panel-color="panel-dark"></span> </div>#}
{#                  <div class="panel-body pn" style="display: block;">#}
{#<h5 class="text-center">{{ trabajo.Nombre }}</h5>#}
{##}
{#                      <h6 class="text-center">Paga acordada: ${{ trabajo.Monto_pago }}</h6>#}
{#                      <h6 class="text-center">Fecha: {{ trabajo.Fecha }}, {{ trabajo.Hora }}</h6>#}
{#                                                <hr  style="padding: 0%;margin: 0.5em;">#}
{##}
{#                  <div class="row">#}
{#                    <div class="col-md-4">#}
{#                        <img style="height: 10em;width: 10em; border-radius: 10em;" class='img-responsive' src="/media/{{ trabajo.Imagen  }}" />#}
{##}
{#                    </div>#}
{#                      <div class="col-md-8" id="acordados{{ trabajo.pk }}" style="overflow:auto;width: 64%;height: 14em;">#}
{#                      {% if trabajo.Vacantes == 0 %}#}
{#                          <div id="postulantes{{ trabajo.pk }}"></div>#}
{#                          <h5 style="padding-top: 3em;">¡Ya tienes todos tus postulantes requeridos!</br> ¿Quieres volver a ver información de ellos? <br>¡Ve a tus <a href="{% url 'visualizar_trabajo_activo' request.user.pk %}" >Trabajos acordados</a>!</h5>#}
{#                    {% else %}#}
{#                    {% for z in postulantes %}#}
{#                            {% if z.Trabajo.pk == trabajo.pk %}#}
{#                                <div id="postulantes{{ trabajo.pk }}"></div>#}
{#                                    {{ z.Postulante.Nombre }}<br>#}
{#                                    {{ z.Fecha }}#}
{#                                    {{ z.Hora   }}#}
{#                                    <a href="{% url 'visualizar_perfil_postulante' z.pk %}" class="btn btn-primary">Visualizar postulante</a></td>#}
{#                                    <hr  style="padding: 0%;margin: 0.5em;">#}
{#                            {% endif %}#}
{#                          {% endfor %}#}
{#                    {% endif %}#}
{#                      </div>#}
{#                      </div>#}
{#                    </div>#}
{#                  </div>#}
{#                </div>#}
{#                    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>#}
{#                    <script>#}
{##}
{#                    if (!document.getElementById("postulantes{{ trabajo.pk }}")) {#}
{#                        document.getElementById("acordados{{ trabajo.pk }}").innerHTML = "<h5 style=\"padding-top: 3em;\">Aún no tienes postulantes!</h5>";#}
{##}
{#                    }#}
{##}
{#                     </script>#}
{##}
{#        </div>#}
    </div>
    </div>


{% endblock %}
{% block scripts %}

{#<script src="{% static 'js/jquery-3.3.1.js' %}"></script>#}
{#    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>#}

<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/dataTables.bootstrap4.min.js' %}"></script>
{#<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>#}

<script>
$(document).ready(function() {
    var table = $('#example').DataTable({
        /* Disable initial sort */
        "order": [],
            "language": {
        "sProcessing":    "Procesando...",
        "sLengthMenu":    "Mostrar _MENU_ registros",
        "sZeroRecords":   "No se encontraron resultados",
        "sEmptyTable":    "Ningún dato disponible en esta tabla",
        "sInfo":          "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
        "sInfoEmpty":     "Mostrando registros del 0 al 0 de un total de 0 registros",
        "sInfoFiltered":  "(filtrado de un total de _MAX_ registros)",
        "sInfoPostFix":   "",
        "sSearch":        "Buscar:",
        "sUrl":           "",
        "sInfoThousands":  ",",
        "sLoadingRecords": "Cargando...",
        "oPaginate": {
            "sFirst":    "Primero",
            "sLast":    "Último",
            "sNext":    "Siguiente",
            "sPrevious": "Anterior"
        },
        "oAria": {
            "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
        }
    }

    });









});


        </script>

{#<script>#}
{##}
{#    $(document).ready(function() {#}
{#        $('#example').DataTable();#}
{#    } );#}
{#</script>#}
{% endblock %}